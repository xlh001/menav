<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="menav-version" content="{{_meta.version}}">
    <title data-editable="site-title">{{site.title}}</title>
    <meta name="description" content="{{site.description}}" data-editable="site-description">
    <meta name="author" content="{{site.author}}" data-editable="site-author">
    <link rel="icon" href="./{{site.favicon}}" type="image/x-icon">
    <link rel="shortcut icon" href="./{{site.favicon}}" type="image/x-icon">
    {{{fontLinks}}}
    <style>
{{{fontCss}}}
    </style>
    <!-- 预设主题和侧边栏状态，避免闪烁 -->
    <script>
        (function() {
            // 读取并应用主题设置
            var savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'light') {
                document.documentElement.classList.add('theme-preload');
            }

            // 读取并应用侧边栏状态
            var sidebarCollapsed = localStorage.getItem('sidebarCollapsed') === 'true';
            var isMobile = window.innerWidth <= 768;
            if (sidebarCollapsed && !isMobile) {
                document.documentElement.classList.add('sidebar-collapsed-preload');
            }

            // 添加这个类用于控制初始渲染
            document.documentElement.classList.add('preload');
        })();
    </script>
    <link rel="stylesheet" href="style.css">
	    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
	</head>
<body class="loading">
    <!-- 滚动进度指示条 -->
    <div class="scroll-progress"></div>
    <div class="layout">
        <!-- 移动端按钮 -->
        <div class="mobile-buttons">
            <button class="menu-toggle" aria-label="切换菜单">
                <i class="fas fa-bars"></i>
            </button>
            <button class="search-toggle" aria-label="切换搜索">
                <i class="fas fa-search"></i>
            </button>
        </div>

        <!-- 遮罩层 -->
        <div class="overlay"></div>

        <!-- 左侧导航 -->
        <nav class="sidebar">
            <div class="logo">
                <div class="logo-brand">
                    {{#if site.favicon}}
                    <img class="logo-image" src="./{{site.favicon}}" alt="{{site.title}} logo" width="26" height="26">
                    {{/if}}
                    <h1 data-editable="logo-text">{{site.logo_text}}</h1>
                </div>
                <button class="sidebar-toggle" aria-label="收起/展开侧边栏">
                    <i class="fas fa-chevron-left toggle-icon"></i>
                </button>
            </div>

            <div class="sidebar-content">
                <div class="nav-section">
                    {{#if navigationData}}
                    {{> navigation navigationData}}
                    {{else}}
                    {{{navigation}}}
                    {{/if}}
                </div>
            </div>

	            <div class="sidebar-social" data-container="social-links">
	                {{#if social}}
	                {{> social-links social}}
	                {{else}}
	                {{{socialLinks}}}
	                {{/if}}
	            </div>

	            <div class="sidebar-footer">
	                <div class="copyright">
	                    <p>© {{currentYear}} <a href="https://github.com/rbetree/menav" target="_blank" rel="noopener">MeNav</a></p>
	                    <p>by <a href="https://github.com/rbetree" target="_blank" rel="noopener">rbetree</a></p>
	                </div>
	            </div>
	        </nav>

        <!-- 右侧内容区 -->
        <main class="content">
            <!-- 搜索框容器 -->
            <div class="search-container">
                <div class="search-box">
	                    <button class="search-engine-button search-engine-toggle"
	                            type="button"
	                            title="选择搜索引擎"
	                            aria-label="选择搜索引擎"
	                            aria-haspopup="menu"
	                            aria-controls="search-engine-dropdown"
	                            aria-expanded="false">
	                        <i class="fas fa-search search-engine-icon" aria-hidden="true"></i>
	                        <span class="search-engine-label">本地</span>
	                    </button>

                    <input type="text" id="search" placeholder="搜索 Ctrl+K ..." aria-label="搜索" aria-keyshortcuts="Control+K Meta+K">

                    <div class="search-engine-dropdown" id="search-engine-dropdown" role="menu" aria-label="搜索引擎列表">
                        <button class="search-engine-option" type="button" role="menuitem" data-engine="local" title="本地搜索">
                            <i class="fas fa-search" aria-hidden="true"></i>
                            <span class="search-engine-option-label">本地搜索</span>
                        </button>
                        <button class="search-engine-option" type="button" role="menuitem" data-engine="google" title="Google搜索">
                            <i class="fab fa-google" aria-hidden="true"></i>
                            <span class="search-engine-option-label">Google</span>
                        </button>
                        <button class="search-engine-option" type="button" role="menuitem" data-engine="bing" title="Bing搜索">
                            <i class="fab fa-microsoft" aria-hidden="true"></i>
                            <span class="search-engine-option-label">Bing</span>
                        </button>
                        <button class="search-engine-option" type="button" role="menuitem" data-engine="duckduckgo" title="DuckDuckGo搜索">
                            <i class="search-engine-option-svg" aria-hidden="true">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" focusable="false">
                                    <path fill="#ff3d00" d="M44,24c0,11-9,20-20,20S4,35,4,24S13,4,24,4S44,13,44,24z"></path>
                                    <path fill="#fff" d="M26,16.2c-0.6-0.6-1.5-0.9-2.5-1.1c-0.4-0.5-1-1-1.9-1.5c-1.6-0.8-3.5-1.2-5.3-0.9h-0.4 c-0.1,0-0.2,0.1-0.4,0.1c0.2,0,1,0.4,1.6,0.6c-0.3,0.2-0.8,0.2-1.1,0.4c0,0,0,0-0.1,0L15.7,14c-0.1,0.2-0.2,0.4-0.2,0.5 c1.3-0.1,3.2,0,4.6,0.4C19,15,18,15.3,17.3,15.7c-0.5,0.3-1,0.6-1.3,1.1c-1.2,1.3-1.7,3.5-1.3,5.9c0.5,2.7,2.4,11.4,3.4,16.3 l0.3,1.6c0,0,3.5,0.4,5.6,0.4c1.2,0,3.2,0.3,3.7-0.2c-0.1,0-0.6-0.6-0.8-1.1c-0.5-1-1-1.9-1.4-2.6c-1.2-2.5-2.5-5.9-1.9-8.1 c0.1-0.4,0.1-2.1,0.4-2.3c2.6-1.7,2.4-0.1,3.5-0.8c0.5-0.4,1-0.9,1.2-1.5C29.4,22.1,27.8,18,26,16.2z"></path>
                                    <path fill="#fff" d="M24,42c-9.9,0-18-8.1-18-18c0-9.9,8.1-18,18-18c9.9,0,18,8.1,18,18C42,33.9,33.9,42,24,42z M24,8 C15.2,8,8,15.2,8,24s7.2,16,16,16s16-7.2,16-16S32.8,8,24,8z"></path>
                                    <path fill="#0277bd" d="M19,21.1c-0.6,0-1.2,0.5-1.2,1.2c0,0.6,0.5,1.2,1.2,1.2c0.6,0,1.2-0.5,1.2-1.2 C20.1,21.7,19.6,21.1,19,21.1z M19.5,22.2c-0.2,0-0.3-0.1-0.3-0.3c0-0.2,0.1-0.3,0.3-0.3s0.3,0.1,0.3,0.3 C19.8,22.1,19.6,22.2,19.5,22.2z M26.8,20.6c-0.6,0-1,0.5-1,1c0,0.6,0.5,1,1,1c0.6,0,1-0.5,1-1S27.3,20.6,26.8,20.6z M27.2,21.5 c-0.1,0-0.3-0.1-0.3-0.3c0-0.1,0.1-0.3,0.3-0.3c0.1,0,0.3,0.1,0.3,0.3S27.4,21.5,27.2,21.5z M19.3,18.9c0,0-0.9-0.4-1.7,0.1 c-0.9,0.5-0.8,1.1-0.8,1.1s-0.5-1,0.8-1.5C18.7,18.1,19.3,18.9,19.3,18.9 M27.4,18.8c0,0-0.6-0.4-1.1-0.4c-1,0-1.3,0.5-1.3,0.5 s0.2-1.1,1.5-0.9C27.1,18.2,27.4,18.8,27.4,18.8"></path>
                                    <path fill="#8bc34a" d="M23.3,35.7c0,0-4.3-2.3-4.4-1.4c-0.1,0.9,0,4.7,0.5,5s4.1-1.9,4.1-1.9L23.3,35.7z M25,35.6 c0,0,2.9-2.2,3.6-2.1c0.6,0.1,0.8,4.7,0.2,4.9c-0.6,0.2-3.9-1.2-3.9-1.2L25,35.6z"></path>
                                    <path fill="#689f38" d="M22.5,35.7c0,1.5-0.2,2.1,0.4,2.3c0.6,0.1,1.9,0,2.3-0.3c0.4-0.3,0.1-2.2-0.1-2.6 C25,34.8,22.5,35.1,22.5,35.7"></path>
                                    <path fill="#ffca28" d="M22.3,26.8c0.1-0.7,2-2.1,3.3-2.2c1.3-0.1,1.7-0.1,2.8-0.3c1.1-0.3,3.9-1,4.7-1.3 c0.8-0.4,4.1,0.2,1.8,1.5c-1,0.6-3.7,1.6-5.7,2.2c-1.9,0.6-3.1-0.6-3.8,0.4c-0.5,0.8-0.1,1.8,2.2,2c3.1,0.3,6.2-1.4,6.5-0.5 c0.3,0.9-2.7,2-4.6,2.1c-1.8,0-5.6-1.2-6.1-1.6C22.9,28.7,22.2,27.8,22.3,26.8"></path>
                                </svg>
                            </i>
                            <span class="search-engine-option-label">DuckDuckGo</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- 页面容器 -->
            {{#each pages}}
            <div class="page {{@key}}{{#if @first}} active{{/if}}" id="{{@key}}">
                {{{this}}}
            </div>
            {{/each}}
        </main>

        <!-- 分类切换按钮 -->
        <button class="category-toggle" id="category-toggle" aria-label="展开/收起分类">
            <i class="fas fa-angle-double-down"></i>
        </button>

        <!-- 主题切换按钮 -->
        <button class="theme-toggle" aria-label="切换主题">
            <i class="fas fa-moon"></i>
        </button>
    </div>
    <!-- 配置数据 - 用于浏览器扩展 -->
    <script id="menav-config-data" type="application/json" style="display: none;">
        {{{configJSON}}}
    </script>
    <script src="pinyin-match.js"></script>
    <script src="script.js"></script>
</body>
</html>
